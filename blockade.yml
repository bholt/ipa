containers:
  s1:
    image: bholt/cassandra
    command: cassandra -f
    ports: [7000]
    environment:
      JVM_OPTS: -Dcassandra.consistent.rangemovement=false

  s2:
    image: bholt/cassandra
    command: cassandra -f
    links: {s1: cassandra}
    environment:
      JVM_OPTS: -Dcassandra.consistent.rangemovement=false

  s3:
    image: bholt/cassandra
    command: cassandra -f
    links: {s1: cassandra}
    environment:
      JVM_OPTS: -Dcassandra.consistent.rangemovement=false
  
  c1:
    image: bholt/owl
    # just keep it alive so we can `docker exec` things on this container
    # to submit jobs, e.g.:
    # > docker exec owl_c1 bin/owl -Dcassandra.replication.factor=3 -Dowl.consistency=weak
    command: tail -f /dev/null
    links: {s1: cassandra}

network:
  slow: 10ms 15ms 50% distribution normal
